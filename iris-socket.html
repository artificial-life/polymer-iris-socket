<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iris-polymer-importer/iris-importer.html">

<link rel="import" href="../../bower_components/iron-meta/iron-meta.html">

<link rel="import" href="socket-scripts.html">

<dom-module id="iris-socket">
  <template>
    <iron-meta id="meta"></iron-meta>
  </template>

  <script>
    'use strict'

    let method = {
      name: "socket",
      request: function(uri, data) {
        return new Promise((resolve, reject) => {
          resolve(mock_request(uri, data))
        });
      },
      subscribe: function(uri, callback) {

      },
      unsubscribe: function(uri, callback) {

      }
    };

    (function() {
      Polymer({
        is: 'iris-socket',
        properties: {},
        ready() {
          //init socket
          let api = this.$.meta.byKey('api');
          let connection = api.require('connection');

          connection.addConnectionMethod(method);
        }
      });
    })();
  </script>

</dom-module>